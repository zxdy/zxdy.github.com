<!doctype html>
<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta name="description" content="Content of description meta tag"/>
        <meta name="keywords" content="代码,数据库,信息安全"/>
        <meta name="author" content="Content of author meta tag"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
        <title>离世庭院 - Web 日志分析
</title>
        <link rel="stylesheet" href="/assets/vendor/normalize.css"/>
        <link rel="stylesheet" href="/assets/vendor/prettify-night.css"/>
        <link rel="stylesheet" href="/assets/themes/default/main.css"/>
        <link rel="shortcut icon" href="/fav.ico"/>
        <script type="text/javascript" src="/assets/vendor/prettify.js"></script>
        
    </head>
    <body onload="prettyPrint()">
    <div id="header">
        <div id="header-inner">
            <div id="title"><a href="/">离世庭院</a></div>
            <div id="subtitle"></div>
        </div>
    </div>

<div id="main">
    <div id="main-inner">
        <div id="topnav">
            <ul>
                <li><a href="/">首页</a></li>
                <li class="sep"> | </li>
                <li><a href="/tag.html">标签</a></li>
                
<li class="sep"> | </li>
<li><a href="/pages/about-me.html" target="_self">关于我</a></li>

<li class="sep"> | </li>
<li><a href="https://github.com/zxdy" target="_blank">github</a></li>


            </ul>
            <div style="clear:both;"></div>
        </div>
        <div id="article-title">
            <a href="/articles/web-log-analyze.html">Web 日志分析</a>
        </div>
        <div id="article-meta">
            作者 Ario | 发布于 2014-04-23
        </div>
        <div id="article-tags">
        
        <a class="tag" href="/tag.html#数据分析">数据分析</a>
        
        </div>
        <div id="article-content">
            <h2 id="1-web-">1.    Web业务分析</h2>
<p>所有统计分析基于三维原则：</p>
<ul>
<li><p>时间线。所以统计图应有时间线功能。粒度支持到分钟级别。支持时，日，周，月，年切换。支持用户自定义时间</p>
</li>
<li><p>在时间线基础上针对某块业务进行分析，如访客行为，流量趋势，页面访问等。</p>
</li>
<li><p>在以上两个维度上，支持各种基础统计指标（如pv，uv，ip，停留时间等，详见基础统计指标）切换，对比。</p>
</li>
</ul>
<p>###1.1.    综合报告</p>
<p>####1.1.1    网站信息</p>
<p>显示网站的基本信息：</p>
<ol>
<li><p>网站名称</p>
</li>
<li><p>网站地址</p>
</li>
<li><p>开始统计时间</p>
</li>
<li><p>已经统计时间</p>
</li>
</ol>
<p>####1.1.2    最近30天流量趋势</p>
<p>分析从当日至前30日内的PV、UV、IP数据及其变化趋势。系统能根据日，周，月，年切换统计。图表方案可以参照以下形式，所有对比分析的三维数据集图都可沿用以下表现形式，保持一致性，同时支持不同类型的图表切换。</p>
<p>系统实时更新“网站流量”数据中的“今日”、“昨日此时”和 “预计今日”部分中的数据，帮助客户实时了解网站的流量数据；</p>
<p>####1.1.3    访客粘度指标</p>
<p>分别统计分析周，月，年回头客的总量，当前时间区间回头率，平均停留时间，平均访问页数。</p>
<p>###1.2.    最近访客</p>
<p>####1.2.1    访客概要</p>
<p>可以通过访问时间、IP地址、来源地区、来源网址、访问最多的网址等多个维度对访问访客的情况及行为进行分析，页面上显示最多100条的最近访客信息。
以（列表？）形式展现</p>
<p>####1.2.2    访客跟踪</p>
<p>可以查看到对应访客最近30分钟内访问的全部页面，详细了解访客的访问轨迹（以visit为单位，每次进入到离开的url轨迹）、访客地区、进入时间、停留时间、访问来源，探索访客的行为规律。</p>
<p>###1.3.    时段分析</p>
<p>时段分析功能，客户可以自定义对24小时内PV、UV、IP数据及变化趋势进行分析，系统会每分钟对该数据进行更新。</p>
<p>时段分析功能分为：</p>
<p>单日流量：可以分析某一天各小时内的PV、UV、IP数据及变化情况。</p>
<p>多日对比：可以分别分析对比选定日期内PV、UV、IP数据及变化情况。</p>
<p>时段趋势：可以选择某段日期区间内分析某一小时时段的PV、UV、IP数据及变化情况。</p>
<p>###1.4.    每日分析</p>
<p>可以按照客户选择的时间，对于本周、上周、本月、上月或任意时间，访客每日访问网站的状况及访客行为进行分析，系统每分钟对数据进行更新。使客户可以最简单、直接的了解站点一定时期内的流量和访客情况。</p>
<p>####1.4.1    每日流量：</p>
<p>分析当日及30日内PV、UV、IP的数据及变化；</p>
<p>####1.4.2    访客平均停留时间：</p>
<p>针对访客行为分析，分析选定时间内访客平均停留时间；</p>
<p>####1.4.3    访客平均访问页数：</p>
<p>针对访客行为分析，分析选定时间内访客平均访问页数；</p>
<p>###1.5.    来源分析</p>
<p>####1.5.1    ip来源</p>
<p>IP来源分析功能，可以记录并分析访问客户网站的IP信息，记录各IP访问的PV量，此功能可以帮助客户更深入的分析来源IP所对应访客的访问行为，及时发现异常或恶意访问的IP。同时，客户可以通过点击页面显示的IP地址查询出该IP所对应的地区名称，IP构成：分析访客IP构成比例(分为直接输入、搜索引擎导入、其他来源导入)。</p>
<p>####1.5.2    访问来源分析</p>
<p>按照不同时间段
各访问来源流量：针对所有访客访问来源，对PV、UV、IP、平均访问时间、平均访问页数等访客行为特点进行分析，同时可以显示各来源占总来源的数据比例；
指定访问来源流量：针对选择的来源分析该来源带来的流量（PV、UV、IP、平均访问时间、平均访问页数）趋势，</p>
<p>###1.6.    被访主机分析</p>
<p>按照不同时间段分析</p>
<p>1.6.1    各主机流量</p>
<p>对比分析各个主机在PV、UV、IP、平均访问时间、平均访问页数维度上的趋势</p>
<p>1.6.2    指定主机流量</p>
<p>指定某主机分析在PV、UV、IP、平均访问时间、平均访问页数维度上的趋势</p>
<p>###1.7.    被访页面分析</p>
<p>被访页面分析功能，可以按照不同时间段，分别对站内被访问页面流量及趋势进行分析，系统会每小时对该数据进行更新。</p>
<p>####1.7.1    被访页面流量</p>
<p>用来分析站内被访页面流量比例，并按流量大小排序，目前报表中显示被访最多的100个页面信息；</p>
<p>####1.7.2    指定被访页面流量趋势</p>
<p>可以通过输入访问页面url地址，按时间分析该页面流量变化趋势。</p>
<p>###1.8.    访问入口分析</p>
<p>####1.8.1    各访问入口流量：</p>
<p>针对所有访问入口，统计访客从该入口进入网站的次数，并排序显示；</p>
<p>####1.8.2    指定访问入口流量趋势：</p>
<p>输入指定的入口链接，选择统计时间段，可显示该时间段内指定访问入口的入口次数及相应百分比</p>
<p>###1.9.    访问出口分析</p>
<p>####1.9.1    各访问出口流量：</p>
<p>针对所有访问出口，统计访客从该出口离开网站的次数，并排序显示；</p>
<p>####1.9.2    指定访问出口流量趋势：</p>
<p>输入指定的出口链接，选择统计时间段，可显示该时间段内指定访问出口的出口次数及相应百分比。</p>
<p>###1.10.    客户端分析</p>
<p>供客户端时间线分析功能，统计和分析访客浏览器内核、浏览器使用情况。帮助客户更有针对性地设计网站，保证网站前端兼容性。</p>
<p>##2.    基础统计指标</p>
<ol>
<li>PV(访问量)：即Page View, 即页面被打开或请求的次数，访客每次刷新即新增一条web日志就被计算一次，web日志的条数代表PV总量。</li>
</ol>
<p>另：唯一页面浏览次数UPV。主要是避免页面的重复加载和刷新导致Pageviews虚高的情况，所以在同一个Visit当中重复打开同一个页面，该页面的Unique Pageviews始终只被记为1次。</p>
<p>定义visit：
同一个访问者（同ip，同浏览器）的两个相邻pageviews之间的时间间隔如果超过了30分钟，会被记录为一个新的visit。
一天结束时，持续的浏览行为自动被切分为两个visit。
一个访问者更换了与原先来源不同的其他来源再次访问这个网站，也会被记为一个新的visit，即使在30分钟内更换也如此。但更换为直接流量除外，即referer字段为空。</p>
<ol>
<li>UV(独立访客)：即Unique Visitor,访问客户网站的一台电脑客户端（相同ip相同浏览器）为一个访客。00:00-24:00内相同的客户端只被计算一次。主流应使用cookie计算</li>
<li>IP(独立IP)：指独立来源IP。00:00-24:00内相同IP地址只被计算一次。</li>
<li>24小时独立IP：指每小时独立的IP地址。该数据每个小时独立去重。</li>
<li>最高IP : 指选择时间段范围内（用户指定），访问最多的ip</li>
<li>最高PV：指选择时间段范围内（用户指定），某页面访问量最高的数值</li>
<li>新访客：某客户端首次访问（从未访问）为一个新访客。</li>
<li>最近访客：最近一段时间内访问客户网站的客户端。显示100条。</li>
<li>常驻访客：指7天内，一个月内，一年visit高于平均值访问网站的访客。</li>
<li>进入页面：单个访客每一次visit的第一个页面为进入页面。</li>
<li>离开页面：单个访客每一次visit所查看的最后一个页面为离开页面。</li>
<li>进入人次：指从某页面进入网站的人次。</li>
<li>离开人次：指从某页面离开网站的人次。</li>
<li>进入时间：访客每次发起visit进入网站的时间。</li>
<li><p>停留时间：单个访客每次visit从第一个页面到最后离开停留的时间。注：涉及停留时间需要算法支持，主流算法有两种。Google Analytics 采用线性化访问过程的方法。将如下的访问过程线性化，离开的页面停留时间记为0.</p>
<p><img src="http://zxdy-blog.qiniudn.com/stay_time.png" alt="stay"></p>
</li>
</ol>
<p>按时间顺序转化为</p>
<p> <img src="http://zxdy-blog.qiniudn.com/stay_time2.png" alt="stay2"></p>
<ol>
<li>平均停留时间：所有访客的访问过程，访问持续时间的平均值。</li>
<li>平均访问页数：所有访客的访问过程，连续访问页面数的平均值。</li>
<li>回头率：指7天内，一个月内，一年内常驻访客数占总访客数的百分比。</li>
<li>跳失率：表示访客只访问了一个页面就离开的访问次数占该页面总访问次数的比例。</li>
<li>访问来源：访客来访问网站的途径，即访客通过哪种方式进入网站。</li>
<li>访客跟踪：可以查看到对应访客最近30分钟内访问的全部页面，详细了解访客的访问轨迹、访客地区、进入时间、停留时间，访问来源，探索访客的行为规律。
22．访客地区比例：每个省市访客占总访客人数的百分比，帮助分析访客地域来源。</li>
</ol>
<p>##3.    日志解析</p>
<p>以下是一条标准的web访问日志。</p>
<pre class="prettyprint linenums lang-text">218.19.140.242 – - [11/Dec/2013:09:31:17 +0800] “GET /query/p/1/s/-1/ver/ver.html HTTP/1.1″ 200 1933 “-” “Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.2.8) Gecko/20100722 Firefox/3.6.8 (.NET CLR 3.5.30729)”
</pre>
<table>
<thead>
<tr>
<th>字段</th>
<th style="text-align:left">字段值</th>
<th style="text-align:left">字段意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td style="text-align:left">218.19.140.242</td>
<td style="text-align:left">来源ip地址</td>
</tr>
<tr>
<td>2</td>
<td style="text-align:left">-</td>
<td style="text-align:left">-</td>
</tr>
<tr>
<td>3</td>
<td style="text-align:left">-</td>
<td style="text-align:left">-</td>
</tr>
<tr>
<td>4</td>
<td style="text-align:left">[11/Dec/2013:09:31:17 +0800]</td>
<td style="text-align:left">访问时间</td>
</tr>
<tr>
<td>5</td>
<td style="text-align:left">GET /query/p/1/s/-1/ver/ver.html HTTP/1.1</td>
<td style="text-align:left">访问方法，url地址，http协议版本</td>
</tr>
<tr>
<td>6</td>
<td style="text-align:left">200</td>
<td style="text-align:left">由服务器端发送回客户端状态码</td>
</tr>
<tr>
<td>7</td>
<td style="text-align:left">1933</td>
<td style="text-align:left">这项表示服务器向客户端发送了多少的字节</td>
</tr>
<tr>
<td>8</td>
<td style="text-align:left">-</td>
<td style="text-align:left">-</td>
</tr>
<tr>
<td>9</td>
<td style="text-align:left">Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.2.8) Gecko/20100722 Firefox/3.6.8 (.NET CLR 3.5.30729)</td>
<td style="text-align:left">记录客户端的浏览器信息</td>
</tr>
</tbody>
</table>

        </div>
        <!-- 多说评论框 start -->
<div class="ds-thread" data-thread-key="web-log-analyze" data-title="Web 日志分析" data-url="http://blog.codinglabs.org/articles/web-log-analyze.html"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"zxdy8812"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->

    </div>
</div>
        <div id="footer">
            <div id="footer-inner">
                <p id="copyright">Copyright (c) 2011-2014 Ario</p>
            </div>
        </div>
        <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [['$','$'], ['\\(','\\)']],
            processEscapes: true
        }
    });
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

    </body>
</html>

